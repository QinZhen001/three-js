<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>动效</title>
</head>

<script>
  javascript: (function () { var script = document.createElement('script'); script.onload = function () { var stats = new Stats(); document.body.appendChild(stats.dom); requestAnimationFrame(function loop() { stats.update(); requestAnimationFrame(loop) }); }; script.src = 'https://mrdoob.github.io/stats.js/build/stats.min.js'; document.head.appendChild(script); })()
</script>
<script  src="dat.gui.min.js"></script>


<script type="importmap">
			{
				"imports": {
					"three": "../build/three.module.js"
				}
			}
</script>

<script type="module">
  import {
    Scene, BoxGeometry, MeshBasicMaterial, WebGLRenderer,
    PerspectiveCamera, Mesh, SpotLight, AxesHelper, MeshLambertMaterial,
    AmbientLight, Vector2
  } from "three"


  const scene = new Scene()
  const camera = new PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)
  const renderer = new WebGLRenderer()
  renderer.setSize(window.innerWidth, window.innerHeight)
  renderer.shadowMap.enabled = true
  document.getElementById("webgl").appendChild(renderer.domElement)

  // 轴 
  const axes = new AxesHelper(50)
  scene.add(axes)

  const geometry = new BoxGeometry(8, 8, 8)
  const material = new MeshLambertMaterial({ color: 0x00ff00 })
  const cube = new Mesh(geometry, material)
  scene.add(cube)
  cube.castShadow = true
  cube.position.x = 4
  cube.position.y = 10
  cube.position.z = 20

  const planeGeometry = new BoxGeometry(100, 100)
  const planeMaterial = new MeshLambertMaterial({ color: 0xcccccc })
  const plane = new Mesh(planeGeometry, planeMaterial)
  plane.rotation.x = -0.5 * Math.PI
  plane.position.set(15, 0, 0)
  plane.receiveShadow = true
  scene.add(plane)

  camera.position.x = -30
  camera.position.y = 45
  camera.position.z = 35
  camera.lookAt(scene.position)


  const spotLight = new SpotLight(0xffffff)
  spotLight.position.set(-60, 40, -65)
  spotLight.castShadow = true
  spotLight.shadow.mapSize = new Vector2(1024, 1024)
  spotLight.shadow.camera.far = 130
  spotLight.shadow.camera.near = 40
  scene.add(spotLight)

  const ambientLight = new AmbientLight(0xAAAAAA)
  scene.add(ambientLight)

  let gap = 0

  renderScene()



  function renderScene() {
    cube.rotation.x += 0.01
    cube.rotation.y += 0.01
    cube.rotation.z += 0.01

    gap += 0.01
    cube.position.x = 25 + (20 * Math.sin(gap))
    cube.position.y = 6 + (20 * Math.abs(Math.cos(gap)))

    requestAnimationFrame(renderScene)
    renderer.render(scene, camera)
  }



</script>

<body>
  <div id="webgl"></div>
  <div id="" myStats></div>
</body>

</html>
